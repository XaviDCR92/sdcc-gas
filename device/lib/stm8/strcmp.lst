                                      1 ;--------------------------------------------------------------------------
                                      2 ;  strcmp.s
                                      3 ;
                                      4 ;  Copyright (C) 2016, Philipp Klaus Krause
                                      5 ;
                                      6 ;  This library is free software; you can redistribute it and/or modify it
                                      7 ;  under the terms of the GNU General Public License as published by the
                                      8 ;  Free Software Foundation; either version 2, or (at your option) any
                                      9 ;  later version.
                                     10 ;
                                     11 ;  This library is distributed in the hope that it will be useful,
                                     12 ;  but WITHOUT ANY WARRANTY; without even the implied warranty of
                                     13 ;  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
                                     14 ;  GNU General Public License for more details.
                                     15 ;
                                     16 ;  You should have received a copy of the GNU General Public License 
                                     17 ;  along with this library; see the file COPYING. If not, write to the
                                     18 ;  Free Software Foundation, 51 Franklin Street, Fifth Floor, Boston,
                                     19 ;   MA 02110-1301, USA.
                                     20 ;
                                     21 ;  As a special exception, if you link this library with other files,
                                     22 ;  some of which are compiled with SDCC, to produce an executable,
                                     23 ;  this library does not by itself cause the resulting executable to
                                     24 ;  be covered by the GNU General Public License. This exception does
                                     25 ;  not however invalidate any other reasons why the executable file
                                     26 ;   might be covered by the GNU General Public License.
                                     27 ;--------------------------------------------------------------------------
                                     28 
                                     29 	.globl _strcmp
                                     30 
                                     31 	.area CODE
                                     32 
      000000                         33 _strcmp:
                                     34 
      000000 16 03            [ 2]   35 	ldw	y, (3, sp)
      000002 1E 05            [ 2]   36 	ldw	x, (5, sp)
                                     37 
      000004                         38 loop:
      000004 90 F6            [ 1]   39 	ld	a, (y)
      000006 27 20            [ 1]   40 	jreq	null
      000008 F1               [ 1]   41 	cp	a, (x)
      000009 26 22            [ 1]   42 	jrne	diff
                                     43 
      00000B 90 E6 01         [ 1]   44 	ld	a, (1, y)
      00000E 27 17            [ 1]   45 	jreq	null_1
      000010 E1 01            [ 1]   46 	cp	a, (1, x)
      000012 26 19            [ 1]   47 	jrne	diff
                                     48 
      000014 90 E6 02         [ 1]   49 	ld	a, (2, y)
      000017 27 0D            [ 1]   50 	jreq	null_2
      000019 E1 02            [ 1]   51 	cp	a, (2, x)
      00001B 26 10            [ 1]   52 	jrne	diff
                                     53 
      00001D 72 A9 00 03      [ 2]   54 	addw	y, #3
      000021 1C 00 03         [ 2]   55 	addw	x, #3
                                     56 
      000024 20 DE            [ 2]   57 	jra	loop
                                     58 
      000026                         59 null_2:
      000026 5C               [ 1]   60 	incw	x
      000027                         61 null_1:
      000027 5C               [ 1]   62 	incw	x
      000028                         63 null:
      000028 7D               [ 1]   64 	tnz	(x)
      000029 26 08            [ 1]   65 	jrne	less
      00002B 5F               [ 1]   66 	clrw	x
      00002C 81               [ 4]   67 	ret
                                     68 
      00002D                         69 diff:
      00002D 25 04            [ 1]   70 	jrult less
      00002F AE 00 01         [ 2]   71 	ldw	x, #1
      000032 81               [ 4]   72 	ret
                                     73 
      000033                         74 less:
      000033 AE FF FF         [ 2]   75 	ldw	x, #-1
      000036 81               [ 4]   76 	ret
                                     77 
